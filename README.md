# 微博爬虫

爬取指定用户尽可能全面的信息。

## 已实现的功能

抓取用户个人基本信息。

抓取用户的所有微博，包括被转发的微博，支持长微博正文、图片ID和文件，可以只抓取指定日期后。

抓取用户互相关注的用户基本信息，可以包含间接互关，可以指定抓取用户粉丝门槛和数量上限。

## 数据保存

所有数据保存到 output以用户id命名的文件夹

* 用户信息保存到 user.json
* 微博保存到mblog.json
* 互关保存到mutual_follow.json
* 微博附图保存到 image

## 配置说明

目前不支持配置中注释

```json
{
  // 配置版本
  "version": "0.0.0",
  // 浏览器用户代理
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36 Edg/105.0.1343.33",
  // cookie，部分需要登陆后的
  "cookie": "你的cookie",
  // 获取页休息页数门槛
  "page_sleep_count": 3,
  // 获取页休息时间
  "page_sleep_duration": 5,
  // 获取信息的用户id列表
  "user_id_list": [
    7772824758
  ],
  // 获取微博配置
  "user_mblog": {
    // 获取微博的id列表(在user_id_list之中才有效)
    "id_list": [
      7772824758
    ],
    // 获取微博的开始日期
    "since_data": "2022-09-01"
  },
  // 获取互关配置
  "user_mutual_follow": {
    // 获取互关的id列表(在user_id_list之中才有效)
    "id_list": [
      7772824758
    ],
    // 粉丝数门槛
    "min_follower": 10000,
    // 最大互关数
    "max_mutual_follower": 1000,
    // 是否包括间接互关
    "include_indirect": false
  }
}
```

## 实现计划

### 功能

- [ ] 配置文件使用JSON5
- [ ] 支持获取用户非互关的关注
- [ ] 下载头条文章
- [ ] 下载视频
- [ ] 通过将接口的返回值保存到文件，减少重复的网络请求
- [ ] 人类友好的显示抓取到的数据，特别是微博的附图

### 系统配置

- [x] 指定目标用户ID
- [x] 指定日期范围
- [x] cookie
- [x] 全局休息时间
- [ ] 图片、视频休息时间

### 用户信息

- [x] 用户个人信息
- [x] 互相关注的用户基本信息
- [ ] 保留不同时间爬取的不同版本的用户信息
- [ ] 互动的用户id

### 微博信息

- [x] 原创微博正文内容
- [x] 转发微博正文内容
- [x] 原创图片
- [x] 转发图片
- [ ] @的用户id
- [ ] 原创头条文章内容
- [ ] 转发头条文章内容
- [ ] 原创视频
- [ ] 转发视频
